<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4-Day Europe Trip Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Roman Dawn -->
    <!-- Application Structure Plan: The application is designed as a single-page interactive dashboard, not a static report, to allow for non-linear exploration. A sticky top navigation facilitates jumps to key sections: a high-level summary, an interactive destination analysis with a clickable chart, a side-by-side booking strategy comparison, a tabbed daily itinerary, and a logistics checklist. This structure was chosen to empower users to quickly grasp the final recommendation, then dive into the specific data points that interest them most (e.g., cost breakdown, daily activities) without overwhelming them with a long, linear document. The flow is designed to go from the broad conclusion to the granular details, mirroring a natural decision-making process. -->
    <!-- Visualization & Content Choices: 
        1. Destination Scores -> Goal: Compare finalists & justify winner -> Viz: Interactive Bar Chart (Chart.js) -> Interaction: Clicking a city's bar/label dynamically updates a detail card with its specific scores and rationale. -> Justification: More engaging than a static table, visually emphasizes the winner, and allows for optional user-driven drill-down into the "why," enhancing transparency.
        2. Budget Breakdown -> Goal: Show cost allocation -> Viz: Donut Chart (Chart.js) with an adjacent data table -> Interaction: Hovering chart segments highlights the corresponding budget category and cost in the table. -> Justification: A donut chart provides an immediate, intuitive understanding of proportions, making the budget allocation easy to digest at a glance.
        3. Itinerary -> Goal: Present a detailed 4-day schedule clearly -> Presentation: Tabbed interface for each day, containing cards with icons for activity types. -> Interaction: Click tabs to switch days. -> Justification: Breaks the dense schedule into manageable daily chunks, preventing information overload and improving readability.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        :root {
            --theme-primary: #D97706;
            --theme-primary-light: #FFFBEB;
            --theme-primary-border: #FBBF24;
            --theme-text-accent: #b45309;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link:hover, .nav-link.active {
            color: var(--theme-primary); 
            border-bottom-color: var(--theme-primary);
        }
        .tab-button.active {
            background-color: var(--theme-primary);
            color: #FFFFFF;
        }
        .city-button {
            background-color: #f3f4f6;
            color: #4b5563;
        }
        .city-button.active {
            background-color: var(--theme-primary);
            color: #FFFFFF;
            font-weight: 600;
        }
        .accent-bg {
            background-color: var(--theme-primary-light);
        }
        .accent-text {
            color: var(--theme-text-accent);
        }
        .accent-border {
            border-color: var(--theme-primary-border);
        }
        .accent-text-strong {
             color: var(--theme-primary);
        }
        .chart-container {
            position: relative; 
            width: 100%; 
            max-width: 800px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-gray-800">Europe Trip Concierge</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#summary" class="nav-link px-3 py-2 text-sm font-medium text-gray-700 border-b-2 border-transparent">Summary</a>
                        <a href="#analysis" class="nav-link px-3 py-2 text-sm font-medium text-gray-700 border-b-2 border-transparent">Analysis</a>
                        <a href="#booking" class="nav-link px-3 py-2 text-sm font-medium text-gray-700 border-b-2 border-transparent">Booking</a>
                        <a href="#itinerary" class="nav-link px-3 py-2 text-sm font-medium text-gray-700 border-b-2 border-transparent">Itinerary</a>
                        <a href="#logistics" class="nav-link px-3 py-2 text-sm font-medium text-gray-700 border-b-2 border-transparent">Logistics</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <section id="summary" class="mb-16 scroll-mt-20">
            <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Executive Summary: Your Trip to <span id="summary-city">Rome</span></h2>
                <p id="summary-text" class="text-lg text-gray-600 mb-6">This plan recommends a 4-day trip to **Rome, Italy**, from **October 5-9, 2025**. Rome is the top-scoring destination, offering an unparalleled blend of world-class cuisine, ancient history, stunning architecture, and vibrant culture that perfectly matches your group's interests. The weather in early October is typically mild and sunny, ideal for exploration.</p>
                <div class="grid md:grid-cols-2 gap-6 accent-bg p-6 rounded-lg transition-colors duration-500">
                    <div>
                        <p class="text-sm font-semibold accent-text uppercase transition-colors duration-500">Recommendation</p>
                        <p class="text-2xl font-bold text-gray-900">Separate Bookings</p>
                        <p class="text-sm text-gray-600">This approach offers greater flexibility, better lodging options, and overall superior value, while staying comfortably within budget.</p>
                    </div>
                    <div class="text-left md:text-right">
                        <p class="text-sm font-semibold accent-text uppercase transition-colors duration-500">Estimated Total Cost (4 Adults)</p>
                        <p id="summary-total-cost" class="text-2xl font-bold text-gray-900">$10,485 USD</p>
                        <p id="summary-pp-cost" class="text-sm text-gray-600">($2,621 per person), including a 10% contingency.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="analysis" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-2">Destination Analysis</h2>
            <p class="text-lg text-center text-gray-600 mb-8">Select a destination below to explore its scores and a tailored itinerary.</p>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-200">
                 <div id="city-selector" class="flex justify-center space-x-2 mb-8">
                    <button class="city-button py-2 px-4 text-sm font-medium rounded-md" data-city="Rome">üáÆüáπ Rome</button>
                    <button class="city-button py-2 px-4 text-sm font-medium rounded-md" data-city="Madrid">üá™üá∏ Madrid</button>
                    <button class="city-button py-2 px-4 text-sm font-medium rounded-md" data-city="Athens">üá¨üá∑ Athens</button>
                </div>
                <div class="chart-container mb-8">
                    <canvas id="destinationChart"></canvas>
                </div>
                <div id="city-details" class="transition-all duration-500">
                </div>
            </div>
        </section>
        
        <section id="booking" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-2">Booking Strategy: Separate vs. Package</h2>
            <p class="text-lg text-center text-gray-600 mb-8">We compared booking flights and lodging separately against an all-in-one vacation package. Separate bookings provide the best value and flexibility for your group.</p>
            <div class="grid lg:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-xl shadow-lg border-2 accent-border transition-colors duration-500">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">üèÜ Recommendation: Separate Bookings</h3>
                    <p id="booking-separate-desc" class="mb-6 text-gray-600">This option provides superior lodging in a 2-bedroom apartment for more space and privacy, better cancellation flexibility, and ultimately a lower overall cost.</p>
                    <div class="space-y-4">
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <p id="booking-flight-name" class="font-semibold text-gray-800">Flights (United, Economy Plus)</p>
                            <p id="booking-flight-cost" class="text-xl font-bold">$5,620</p>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <p id="booking-lodging-name" class="font-semibold text-gray-800">Lodging (Navona Queen Rooftop Apartment)</p>
                            <p id="booking-lodging-cost" class="text-xl font-bold">$3,455</p>
                        </div>
                    </div>
                    <div class="mt-6 pt-6 border-t">
                        <p class="text-sm font-semibold text-gray-800 uppercase">Subtotal</p>
                        <p id="booking-separate-total" class="text-3xl font-bold text-gray-900">$9,075</p>
                    </div>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Alternative: Package Deal</h3>
                    <p id="booking-package-desc" class="mb-6 text-gray-600">A convenient option with a single point of contact. However, it requires booking two separate hotel rooms, offers less space, and has stricter cancellation policies for a slightly higher price.</p>
                     <div class="space-y-4">
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <p id="booking-package-name" class="font-semibold text-gray-800">Flights + Hotel (Hotel Indigo Rome, 2 Rooms)</p>
                            <p id="booking-package-cost" class="text-xl font-bold">$9,650</p>
                        </div>
                    </div>
                     <div class="mt-6 pt-6 border-t">
                        <p class="text-sm font-semibold text-gray-800 uppercase">Total Price</p>
                        <p id="booking-package-total" class="text-3xl font-bold text-gray-900">$9,650</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="itinerary" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-2">Your 4-Day <span id="itinerary-city-title">Rome</span> Itinerary</h2>
            <p class="text-lg text-center text-gray-600 mb-8">A balanced plan mixing iconic landmarks with culinary experiences and relaxation time. All activities are suggestions with booking links where applicable.</p>
            <div>
                <div class="mb-4 flex justify-center space-x-2 rounded-lg bg-gray-200 p-1">
                    <button class="tab-button flex-1 py-2 px-4 text-sm font-medium rounded-md transition" data-tab="day1">Day 1</button>
                    <button class="tab-button flex-1 py-2 px-4 text-sm font-medium rounded-md transition" data-tab="day2">Day 2</button>
                    <button class="tab-button flex-1 py-2 px-4 text-sm font-medium rounded-md transition" data-tab="day3">Day 3</button>
                    <button class="tab-button flex-1 py-2 px-4 text-sm font-medium rounded-md transition" data-tab="day4">Day 4</button>
                </div>

                <div id="itinerary-content" class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-200">
                </div>
            </div>
        </section>
        
        <section id="logistics" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-2">Logistics & Pre-Trip Checklist</h2>
            <p class="text-lg text-center text-gray-600 mb-8">Key information to ensure a smooth and enjoyable trip.</p>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Itemized Budget</h3>
                    <div class="flex items-center space-x-6">
                        <div class="chart-container" style="height:250px; max-width: 250px;">
                           <canvas id="budgetChart"></canvas>
                        </div>
                        <div class="flex-1">
                            <ul class="space-y-2 text-sm">
                                <li class="flex justify-between"><span>Flights</span> <strong id="budget-flights">$5,620</strong></li>
                                <li class="flex justify-between"><span>Lodging</span> <strong id="budget-lodging">$3,455</strong></li>
                                <li class="flex justify-between"><span>Food & Activities</span> <strong id="budget-activities">$1,410</strong></li>
                                <li class="flex justify-between border-t pt-2 mt-2"><span>Subtotal</span> <strong id="budget-subtotal">$10,485</strong></li>
                                <li class="flex justify-between accent-text transition-colors duration-500"><span>Contingency (10%)</span> <strong id="budget-contingency">$1,049</strong></li>
                                <li class="flex justify-between text-lg font-bold border-t pt-2 mt-2"><span>Grand Total</span> <strong id="budget-grand-total">$11,534</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
                 <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Quick Book & Details</h3>
                     <div class="space-y-4">
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <p class="font-bold" id="quickbook-flight-name">Flights: United UA41 (EWR-FCO)</p>
                            <p class="text-sm" id="quickbook-flight-details">Dep: Oct 4, 8:40 PM EDT ‚Üí Arr: Oct 5, 11:15 AM CEST</p>
                            <a href="#" class="text-sm accent-text-strong hover:underline transition-colors duration-500">Book on United.com &rarr;</a>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <p class="font-bold" id="quickbook-lodging-name">Lodging: Navona Queen Rooftop</p>
                            <p class="text-sm" id="quickbook-lodging-details">Check-in: Oct 5 ‚Üí Check-out: Oct 9 (4 nights)</p>
                             <a href="#" class="text-sm accent-text-strong hover:underline transition-colors duration-500">Book on Booking.com &rarr;</a>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <p class="font-bold" id="quickbook-transfer-name">Airport Transfer: Welcome Pickups</p>
                            <p class="text-sm" id="quickbook-transfer-details">Pre-booked private transfer (~‚Ç¨60)</p>
                             <a href="#" class="text-sm accent-text-strong hover:underline transition-colors duration-500">Book Transfer &rarr;</a>
                        </div>
                    </div>
                </div>
                 <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200 md:col-span-2">
                     <h3 class="text-2xl font-bold text-gray-900 mb-4">Pre-Trip Checklist</h3>
                     <ul id="checklist" class="grid md:grid-cols-2 gap-x-8 gap-y-4 list-disc list-inside text-gray-700">
                        <li><strong>Passports:</strong> Check validity. Must be valid for at least 6 months beyond your planned departure from the Schengen area.</li>
                        <li><strong>ETIAS:</strong> As of 2025, US citizens will need an ETIAS authorization for entry. Apply online at least 72 hours before departure.</li>
                        <li><strong>Travel Insurance:</strong> Purchase comprehensive coverage for medical emergencies and trip cancellation.</li>
                        <li><strong>Payment:</strong> Notify banks of travel dates. Use credit cards with no foreign transaction fees. Withdraw some Euros from an ATM upon arrival for small purchases.</li>
                        <li><strong>Connectivity:</strong> Purchase an eSIM (e.g., Airalo) before you leave for easy data access upon landing. Download offline Google Maps for Rome.</li>
                        <li><strong>Power Adapters:</strong> Italy uses Type F sockets. Pack at least two universal adapters.</li>
                        <li><strong>Emergency Contacts:</strong> Local emergency number is 112. Save the address of your lodging and the US Embassy in Rome.</li>
                        <li><strong>Reservations:</strong> Book tours (Colosseum, Vatican) and special-occasion dinners at least 3-4 weeks in advance.</li>
                     </ul>
                 </div>
            </div>
        </section>

    </main>

    <footer class="bg-white mt-16 border-t">
        <div class="container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm">
            <p>This travel plan was generated for the Uttara & Kumar family. All prices and availability are estimates as of Sep 22, 2025, and are subject to change. Please verify all details before booking.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            let currentCity = 'Rome';
            let budgetChart;
            
            const themes = {
                Rome: { primary: '#D97706', primaryLight: '#FFFBEB', primaryBorder: '#FBBF24', textAccent: '#b45309' },
                Madrid: { primary: '#DC2626', primaryLight: '#FEE2E2', primaryBorder: '#F87171', textAccent: '#b91c1c' },
                Athens: { primary: '#2563EB', primaryLight: '#DBEAFE', primaryBorder: '#60A5FA', textAccent: '#1e40af' }
            };

            const cityData = {
                Rome: {
                    score: 8.8,
                    itineraryKey: 'rome',
                    summaryText: 'This plan recommends a 4-day trip to **Rome, Italy**, from **October 5-9, 2025**. Rome is the top-scoring destination, offering an unparalleled blend of world-class cuisine, ancient history, stunning architecture, and vibrant culture that perfectly matches your group\'s interests. The weather in early October is typically mild and sunny, ideal for exploration.',
                    details: [
                        { label: 'Cuisine', value: 9.5, note: 'Excellent quality and variety. Famous for pasta, pizza, and well-seasoned meats. Many spicy options available (e.g., arrabbiata sauce).' },
                        { label: 'Lodging', value: 9.0, note: 'Wide range of high-quality hotels and spacious apartments in central, walkable locations.' },
                        { label: 'Attraction Fit', value: 9.5, note: 'Perfectly matches all interests, from ancient history and grand architecture to museums, nature, and shopping.' },
                        { label: 'Weather', value: 8.0, note: 'Early October is typically ideal, with average highs of 72¬∞F (22¬∞C) and low chances of rain.' },
                        { label: 'Travel Convenience', value: 8.0, note: 'Reliable nonstop flights from EWR/JFK. Efficient airport transfers.' },
                        { label: 'Cost Penalty', value: -0.7, note: 'Excellent value for a major European capital, allowing for luxury within the budget.' },
                    ],
                },
                Madrid: {
                    score: 7.9,
                    itineraryKey: 'madrid',
                    summaryText: 'This plan outlines a 4-day trip to **Madrid, Spain**, a strong contender known for its world-class art, vibrant tapas culture, and elegant architecture. It offers a fantastic European city break with a different flavor, though it has fewer ancient landmarks than Rome.',
                    details: [
                        { label: 'Cuisine', value: 8.5, note: 'Fantastic tapas culture, high-quality seafood and steak. Vibrant and well-seasoned dishes.' },
                        { label: 'Lodging', value: 8.5, note: 'Great hotel options, though apartment value can be slightly lower than Rome for this group size.' },
                        { label: 'Attraction Fit', value: 8.0, note: 'World-class art museums and beautiful architecture. Fewer iconic ancient landmarks compared to Rome.' },
                        { label: 'Weather', value: 7.5, note: 'Generally pleasant, with highs around 69¬∞F (21¬∞C), but can be cooler than desired.' },
                        { label: 'Travel Convenience', value: 8.0, note: 'Good nonstop flight availability from the NYC area.' },
                        { label: 'Cost Penalty', value: -0.8, note: 'Slightly more affordable than Rome, offering strong value.' },
                    ],
                },
                Athens: {
                    score: 7.2,
                    itineraryKey: 'athens',
                    summaryText: 'This plan details a 4-day trip to **Athens, Greece**, the cradle of Western civilization. It is an unbeatable choice for lovers of ancient history, offering iconic sites and excellent weather, though flight convenience is lower from the NYC area.',
                    details: [
                        { label: 'Cuisine', value: 8.0, note: 'Delicious Mediterranean food with fresh seafood and grilled meats. Can be less varied than Italian or Spanish cuisine.' },
                        { label: 'Lodging', value: 8.0, note: 'Good selection of modern hotels, many with Acropolis views.' },
                        { label: 'Attraction Fit', value: 8.5, note: 'Unbeatable for ancient history lovers. A bit less variety in other museum types and shopping.' },
                        { label: 'Weather', value: 8.5, note: 'Excellent weather, typically sunny and warm with highs around 74¬∞F (23¬∞C).' },
                        { label: 'Travel Convenience', value: 6.0, note: 'Fewer nonstop flight options, which can be longer and less conveniently timed.' },
                        { label: 'Cost Penalty', value: -0.6, note: 'Very affordable, offering great value for money.' },
                    ],
                },
            };

            const itineraryData = {
                rome: {
                    day1: { title: 'Day 1: Arrival & Historic Heart', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (11:15 AM)</h4><p>Arrive at Rome Fiumicino (FCO). Clear immigration and collect bags. Meet your pre-booked driver from Welcome Pickups (~45 min transfer to city center).</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (1:30 PM)</h4><p>Check into your apartment. Drop luggage and enjoy a light lunch at a nearby cafe. Afterwards, take a leisurely stroll to the <strong class="font-semibold">Pantheon</strong> to marvel at its architectural genius, followed by the vibrant <strong class="font-semibold">Piazza Navona</strong> with its stunning fountains.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (7:30 PM)</h4><p>Enjoy a relaxed dinner at <strong class="font-semibold">Armando al Pantheon</strong> (book 4 weeks ahead) for classic Roman cuisine. This will be an easy first evening to help adjust to the time zone.</p></div></div>` },
                    day2: { title: 'Day 2: Ancient Wonders', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (9:00 AM)</h4><p>Embark on a pre-booked small-group tour of the <strong class="font-semibold">Colosseum, Roman Forum, and Palatine Hill</strong>. This covers the engineering, history, and cultural interests of the group. (Book via GetYourGuide/Viator 4-6 weeks in advance).</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (1:30 PM)</h4><p>After a traditional Roman lunch near the Forum, enjoy some downtime. Optional split: Sridhar & Rijul could visit the <strong class="font-semibold">Capitoline Museums</strong> for more history, while Aparna & Annie could explore the charming Monti neighborhood for unique boutiques.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (8:00 PM)</h4><p>Dinner in the lively Trastevere district at <strong class="font-semibold">Tonnarello</strong>, famous for its pasta served in pans. Enjoy a post-dinner stroll through the cobblestone streets.</p></div></div>` },
                    day3: { title: 'Day 3: Art, Faith & Grandeur', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (8:00 AM)</h4><p>Early start with a pre-booked "skip-the-line" tour of the <strong class="font-semibold">Vatican Museums, Sistine Chapel, and St. Peter's Basilica</strong>. This is essential to avoid hours-long queues and is a highlight for art and architecture interests.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (2:00 PM)</h4><p>After lunch, the group can split. Aparna and Annie can enjoy world-class shopping along <strong class="font-semibold">Via del Corso</strong> and near the Spanish Steps. Rijul might enjoy the unique <strong class="font-semibold">Leonardo da Vinci Experience</strong> museum, which showcases his engineering and artistic genius.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (7:30 PM)</h4><p>A special-occasion dinner at <strong class="font-semibold">Ad Hoc Ristorante</strong> near Piazza del Popolo, known for its creative take on Italian classics and extensive wine list (book well in advance).</p></div></div>` },
                    day4: { title: 'Day 4: Fountains, Flavors & Farewell', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (8:30 AM)</h4><p>Visit the <strong class="font-semibold">Trevi Fountain</strong> early to experience it with fewer crowds. Afterwards, enjoy a final Roman breakfast and climb the <strong class="font-semibold">Spanish Steps</strong> for city views. Stroll through the tranquil <strong class="font-semibold">Villa Borghese gardens</strong> for a dose of scenic nature.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (1:00 PM)</h4><p>Engage in a hands-on <strong class="font-semibold">pasta-making class</strong>. This is a fun, interactive activity for the whole group that celebrates Italian cuisine. Several reputable schools are available to book online.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (7:00 PM)</h4><p>Enjoy a farewell dinner at a rooftop restaurant with views of the city, such as <strong class="font-semibold">Terrazza Borromini</strong> (book ahead). Afterwards, head to FCO airport for your late-night flight home (many flights depart after 10 PM).</p></div></div>` }
                },
                madrid: {
                    day1: { title: 'Day 1: Arrival & Royal Heart', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (11:00 AM)</h4><p>Arrive at Madrid-Barajas (MAD). After clearing customs, take a pre-booked private transfer or a taxi to your hotel in the city center (~30 mins).</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (1:30 PM)</h4><p>After check-in, have a relaxed lunch at <strong class="font-semibold">Mercado de San Miguel</strong>, an iconic food market. Then, take a walk through the grand <strong class="font-semibold">Plaza Mayor</strong> and see the Royal Palace from the outside.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (8:30 PM)</h4><p>Dinner in the vibrant La Latina neighborhood, known for its tapas bars. Try <strong class="font-semibold">Juana La Loca</strong> for creative pintxos and a lively atmosphere.</p></div></div>` },
                    day2: { title: 'Day 2: Art & Culture', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (10:00 AM)</h4><p>Immerse yourselves in art at the <strong class="font-semibold">Prado Museum</strong>, home to masterpieces by Goya, Vel√°zquez, and El Greco. Book tickets online to avoid lines.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (2:00 PM)</h4><p>After lunch, the group can split. Art lovers can continue to the <strong class="font-semibold">Reina Sof√≠a Museum</strong> to see Picasso's "Guernica." Others can enjoy shopping on the Gran V√≠a or relax in the beautiful <strong class="font-semibold">El Retiro Park</strong>.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (9:00 PM)</h4><p>Experience the passion of Spain with a high-quality <strong class="font-semibold">Flamenco show</strong> at a venue like Cardamomo or Corral de la Morer√≠a (book show with dinner).</p></div></div>` },
                    day3: { title: 'Day 3: Royal Residence & Local Life', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (9:30 AM)</h4><p>Tour the opulent <strong class="font-semibold">Royal Palace of Madrid</strong>, the official residence of the Spanish Royal Family. The armory and grand halls are highlights for history and architecture fans.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (1:30 PM)</h4><p>Explore the trendy Malasa√±a neighborhood for lunch and boutique shopping. For Rijul, a tour of the <strong class="font-semibold">Santiago Bernab√©u Stadium</strong> (home of Real Madrid) could be an exciting alternative.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (8:00 PM)</h4><p>Enjoy a fantastic steak dinner at <strong class="font-semibold">Casa Lucio</strong> or <strong class="font-semibold">La Caba√±a Argentina</strong> to satisfy the group's culinary interests.</p></div></div>` },
                    day4: { title: 'Day 4: Views & Farewell Flavors', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (10:00 AM)</h4><p>Visit the <strong class="font-semibold">Temple of Debod</strong>, an ancient Egyptian temple dismantled and rebuilt in Madrid. Then, take the cable car (<strong class="font-semibold">Telef√©rico</strong>) for panoramic city views.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (1:00 PM)</h4><p>Enjoy a final Spanish meal and some souvenir shopping in the area around Puerta del Sol. Don't miss trying churros with chocolate at <strong class="font-semibold">Chocolater√≠a San Gin√©s</strong>.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (7:00 PM)</h4><p>Head to Madrid-Barajas (MAD) airport for your evening flight back home.</p></div></div>` }
                },
                athens: {
                    day1: { title: 'Day 1: Arrival & Plaka Charm', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (1:00 PM)</h4><p>Arrive at Athens International Airport (ATH). Take a pre-booked transfer or the metro to your hotel in the city center (~50 mins).</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (3:30 PM)</h4><p>After checking in, take a walk through the charming, historic <strong class="font-semibold">Plaka district</strong>, located at the base of the Acropolis. Explore its narrow streets, shops, and cafes.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (7:30 PM)</h4><p>Enjoy a traditional Greek dinner with Acropolis views at a restaurant in Plaka, such as <strong class="font-semibold">Geros Tou Moria</strong>, which often features live music.</p></div></div>` },
                    day2: { title: 'Day 2: The Acropolis & Ancient Agora', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (8:00 AM)</h4><p>Start early to beat the crowds and the heat at the <strong class="font-semibold">Acropolis</strong>. A guided tour is highly recommended to understand the history of the Parthenon, the Erechtheion, and other iconic structures.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (1:00 PM)</h4><p>After lunch, visit the magnificent <strong class="font-semibold">Acropolis Museum</strong>, which houses artifacts from the archaeological site. Afterwards, explore the <strong class="font-semibold">Ancient Agora</strong>, the heart of ancient Athens.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (8:00 PM)</h4><p>Dine in the vibrant Psiri neighborhood, known for its excellent tavernas and nightlife. Try <strong class="font-semibold">Oineas Restaurant</strong> for modern Greek cuisine.</p></div></div>` },
                    day3: { title: 'Day 3: Temples & Scenic Views', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (10:00 AM)</h4><p>Visit the massive <strong class="font-semibold">Temple of Olympian Zeus</strong> and Hadrian's Arch. Then, watch the changing of the guard (Evzones) at Syntagma Square in front of the Hellenic Parliament.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (2:00 PM)</h4><p>Group split: Sridhar, Aparna, and Annie could visit the <strong class="font-semibold">National Archaeological Museum</strong>, one of the world's great museums. For a more active option, Rijul might enjoy a historical martial arts class focusing on ancient Greek Pankration if available.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (6:00 PM)</h4><p>Take the funicular up <strong class="font-semibold">Lycabettus Hill</strong> to watch a spectacular sunset over Athens and the Aegean Sea, a perfect scenic nature experience.</p></div></div>` },
                    day4: { title: 'Day 4: Markets & Farewell', content: `<div class="space-y-6"><div><h4 class="font-bold text-lg accent-text-strong">Morning (9:30 AM)</h4><p>Explore the bustling <strong class="font-semibold">Varvakios Agora</strong> (Central Market) to experience the local culture and see the incredible displays of fresh seafood, meat, and produce.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Afternoon (1:00 PM)</h4><p>Enjoy a final seafood lunch in the Monastiraki area. Do some last-minute souvenir shopping at the Monastiraki Flea Market.</p></div><div><h4 class="font-bold text-lg accent-text-strong">Evening (6:00 PM)</h4><p>Head to Athens International Airport (ATH) for your flight home.</p></div></div>` }
                }
            };

            const bookingAndLogisticsData = {
                Rome: {
                    summaryTotal: '$11,534', summaryPP: '($2,884 per person)',
                    separate: { desc: 'This option provides superior lodging in a 2-bedroom apartment for more space and privacy, better cancellation flexibility, and ultimately a lower overall cost.', flightName: 'Flights (United, Economy Plus)', flightCost: '$5,620', lodgingName: 'Lodging (Navona Queen Rooftop)', lodgingCost: '$3,455', total: '$9,075' },
                    package: { desc: 'A convenient option with a single point of contact. However, it requires booking two separate hotel rooms, offers less space, and has stricter cancellation policies for a slightly higher price.', name: 'Flights + Hotel (Hotel Indigo Rome, 2 Rooms)', cost: '$9,650', total: '$9,650' },
                    budget: { flights: 5620, lodging: 3455, activities: 1410 },
                    quickbook: { flightName: 'Flights: United UA41 (EWR-FCO)', flightDetails: 'Dep: Oct 4, 8:40 PM EDT ‚Üí Arr: Oct 5, 11:15 AM CEST', lodgingName: 'Lodging: Navona Queen Rooftop', lodgingDetails: 'Check-in: Oct 5 ‚Üí Check-out: Oct 9 (4 nights)', transferName: 'Airport Transfer: Welcome Pickups', transferDetails: 'Pre-booked private transfer (~‚Ç¨60)' },
                    checklist: `<li><strong>Passports:</strong> Check validity. Must be valid for at least 6 months beyond your planned departure from the Schengen area.</li><li><strong>ETIAS:</strong> As of 2025, US citizens will need an ETIAS authorization for entry. Apply online at least 72 hours before departure.</li><li><strong>Travel Insurance:</strong> Purchase comprehensive coverage for medical emergencies and trip cancellation.</li><li><strong>Payment:</strong> Notify banks of travel dates. Use credit cards with no foreign transaction fees. Withdraw some Euros from an ATM upon arrival for small purchases.</li><li><strong>Connectivity:</strong> Purchase an eSIM (e.g., Airalo) for Italy before you leave. Download offline Google Maps for Rome.</li><li><strong>Power Adapters:</strong> Italy uses Type F sockets. Pack at least two universal adapters.</li><li><strong>Emergency Contacts:</strong> Local emergency number is 112. Save the address of your lodging and the US Embassy in Rome.</li><li><strong>Reservations:</strong> Book tours (Colosseum, Vatican) and special-occasion dinners at least 3-4 weeks in advance.</li>`
                },
                Madrid: {
                    summaryTotal: '$10,980', summaryPP: '($2,745 per person)',
                    separate: { desc: 'The best value, offering a spacious 2-bedroom apartment in a prime location with excellent amenities and flexibility.', flightName: 'Flights (Iberia, Premium Economy)', flightCost: '$5,880', lodgingName: 'Lodging (Eric Vokel Boutique Apartments)', lodgingCost: '$3,050', total: '$8,930' },
                    package: { desc: 'A solid alternative from a reputable provider, but with standard hotel rooms instead of an apartment and less booking flexibility.', name: 'Flights + Hotel (Pestana Plaza Mayor, 2 Rooms)', cost: '$9,450', total: '$9,450' },
                    budget: { flights: 5880, lodging: 3050, activities: 1200 },
                    quickbook: { flightName: 'Flights: Iberia IB6250 (JFK-MAD)', flightDetails: 'Dep: Oct 4, 9:50 PM EDT ‚Üí Arr: Oct 5, 11:20 AM CEST', lodgingName: 'Lodging: Eric Vokel Boutique Apartments', lodgingDetails: 'Check-in: Oct 5 ‚Üí Check-out: Oct 9 (4 nights)', transferName: 'Airport Transfer: Taxi/Rideshare', transferDetails: 'Official taxi rank or Uber/Cabify (~‚Ç¨30-40)' },
                    checklist: `<li><strong>Passports:</strong> Check validity. Must be valid for at least 6 months beyond your planned departure from the Schengen area.</li><li><strong>ETIAS:</strong> As of 2025, US citizens will need an ETIAS authorization for entry. Apply online at least 72 hours before departure.</li><li><strong>Travel Insurance:</strong> Purchase comprehensive coverage.</li><li><strong>Payment:</strong> Notify banks of travel. Use no-FX-fee cards. Withdraw Euros as needed.</li><li><strong>Connectivity:</strong> Get an eSIM for Spain (e.g., Orange) and download offline maps for Madrid.</li><li><strong>Power Adapters:</strong> Spain uses Type F sockets. Pack universal adapters.</li><li><strong>Emergency Contacts:</strong> Local emergency is 112. Note your lodging address and the US Embassy in Madrid.</li><li><strong>Reservations:</strong> Book Prado Museum tickets and top Flamenco shows 2-3 weeks ahead.</li>`
                },
                Athens: {
                    summaryTotal: '$10,120', summaryPP: '($2,530 per person)',
                    separate: { desc: 'The most cost-effective option, featuring a modern apartment with stunning Acropolis views and excellent user ratings.', flightName: 'Flights (Emirates, Economy)', flightCost: '$5,980', lodgingName: 'Lodging (Acropolis View Deluxe Penthouse)', lodgingCost: '$2,450', total: '$8,430' },
                    package: { desc: 'A simple booking process, but offers less value compared to the separate booking due to standard hotel rooms and higher cost.', name: 'Flights + Hotel (Electra Metropolis, 2 Rooms)', cost: '$9,100', total: '$9,100' },
                    budget: { flights: 5980, lodging: 2450, activities: 1000 },
                    quickbook: { flightName: 'Flights: Emirates EK210 (EWR-ATH)', flightDetails: 'Dep: Oct 4, 11:55 PM EDT ‚Üí Arr: Oct 5, 4:25 PM EEST', lodgingName: 'Lodging: Acropolis View Deluxe Penthouse', lodgingDetails: 'Check-in: Oct 5 ‚Üí Check-out: Oct 9 (4 nights)', transferName: 'Airport Transfer: Metro or Welcome Pickups', transferDetails: 'Metro Line 3 to Syntagma (~‚Ç¨18/2 people) or pre-booked car.' },
                    checklist: `<li><strong>Passports:</strong> Check validity (6 months+).</li><li><strong>ETIAS:</strong> Apply for ETIAS authorization online ahead of your 2025 trip.</li><li><strong>Travel Insurance:</strong> Ensure you have full medical and cancellation coverage.</li><li><strong>Payment:</strong> Inform your credit card companies. Have some Euros on hand for smaller shops.</li><li><strong>Connectivity:</strong> An eSIM for Greece (e.g., Cosmote) is recommended. Download offline maps for Athens.</li><li><strong>Power Adapters:</strong> Greece uses Type F sockets. Bring adapters.</li><li><strong>Emergency Contacts:</strong> Emergency line is 112. Know your lodging address and the location of the US Embassy in Athens.</li><li><strong>Reservations:</strong> Book Acropolis tickets and your guide 3-4 weeks in advance, especially for early morning slots.</li>`
                }
            };
            
            const renderCityDetails = (city) => {
                const data = cityData[city];
                if (!data) return;
                const detailsContainer = document.getElementById('city-details');
                let content = `<h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">Score Breakdown for ${city}</h3><div class="grid md:grid-cols-2 gap-x-8 gap-y-4">`;
                data.details.forEach(item => {
                    content += `
                        <div class="p-4 bg-gray-50 rounded-lg">
                           <div class="flex justify-between items-baseline">
                                <p class="font-semibold text-gray-800">${item.label}</p>
                                <p class="text-lg font-bold accent-text-strong">${item.value.toFixed(1)}</p>
                           </div>
                           <p class="text-sm text-gray-600 mt-1">${item.note}</p>
                        </div>
                    `;
                });
                content += '</div>';
                detailsContainer.innerHTML = content;
            };
            
            const ctx = document.getElementById('destinationChart').getContext('2d');
            const destinationChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(cityData),
                    datasets: [{
                        label: 'Value Score (out of 10)',
                        data: Object.values(cityData).map(d => d.score),
                        backgroundColor: [],
                        borderColor: [],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, max: 10 } },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) { label += ': '; }
                                    if (context.parsed.y !== null) { label += context.parsed.y.toFixed(1); }
                                    return label;
                                }
                            }
                        }
                    },
                    onClick: (e, elements) => {
                        if (elements.length > 0) {
                            const cityIndex = elements[0].index;
                            const city = destinationChart.data.labels[cityIndex];
                            selectCity(city);
                        }
                    }
                }
            });

            const budgetCtx = document.getElementById('budgetChart').getContext('2d');
            budgetChart = new Chart(budgetCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Flights', 'Lodging', 'Food & Activities'],
                    datasets: [{
                        data: [],
                        backgroundColor: ['#F59E0B', '#FBBF24', '#FCD34D'],
                        hoverOffset: 4
                    }]
                },
                 options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom', labels: { padding: 15, boxWidth: 12, } } }
                }
            });

            const citySelectorButtons = document.querySelectorAll('.city-button');
            const tabButtons = document.querySelectorAll('.tab-button');
            const itineraryContent = document.getElementById('itinerary-content');

            const updateTheme = (city) => {
                const theme = themes[city];
                const root = document.documentElement;
                root.style.setProperty('--theme-primary', theme.primary);
                root.style.setProperty('--theme-primary-light', theme.primaryLight);
                root.style.setProperty('--theme-primary-border', theme.primaryBorder);
                root.style.setProperty('--theme-text-accent', theme.textAccent);
            };

            const updateChartHighlight = (selectedCity) => {
                const theme = themes[selectedCity];
                const bgColors = [];
                const borderColors = [];

                destinationChart.data.labels.forEach(city => {
                    if (city === selectedCity) {
                        bgColors.push(theme.primary + 'B3'); 
                        borderColors.push(theme.primary);
                    } else {
                        bgColors.push('rgba(156, 163, 175, 0.5)');
                        borderColors.push('rgba(156, 163, 175, 1)');
                    }
                });
                destinationChart.data.datasets[0].backgroundColor = bgColors;
                destinationChart.data.datasets[0].borderColor = borderColors;
                destinationChart.update();
            };
            
            const renderItinerary = (city) => {
                document.getElementById('itinerary-city-title').textContent = city;
                tabButtons.forEach((btn, index) => {
                    const dayKey = `day${index + 1}`;
                    btn.textContent = itineraryData[cityData[city].itineraryKey][dayKey].title.split(':')[0];
                });
                renderItineraryTab('day1');
            };

            const renderItineraryTab = (tabId) => {
                tabButtons.forEach(button => button.classList.toggle('active', button.dataset.tab === tabId));
                
                const cityItineraryKey = cityData[currentCity].itineraryKey;
                const data = itineraryData[cityItineraryKey][tabId];
                itineraryContent.innerHTML = `
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">${data.title}</h3>
                    ${data.content}
                `;
            };

            const updateBookingAndLogistics = (city) => {
                const data = bookingAndLogisticsData[city];
                
                document.getElementById('summary-total-cost').textContent = data.summaryTotal;
                document.getElementById('summary-pp-cost').textContent = data.summaryPP;
                document.getElementById('summary-text').innerHTML = cityData[city].summaryText.replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold">$1</strong>');
                
                document.getElementById('booking-separate-desc').textContent = data.separate.desc;
                document.getElementById('booking-flight-name').textContent = data.separate.flightName;
                document.getElementById('booking-flight-cost').textContent = data.separate.flightCost;
                document.getElementById('booking-lodging-name').textContent = data.separate.lodgingName;
                document.getElementById('booking-lodging-cost').textContent = data.separate.lodgingCost;
                document.getElementById('booking-separate-total').textContent = data.separate.total;

                document.getElementById('booking-package-desc').textContent = data.package.desc;
                document.getElementById('booking-package-name').textContent = data.package.name;
                document.getElementById('booking-package-cost').textContent = data.package.cost;
                document.getElementById('booking-package-total').textContent = data.package.total;
                
                const subtotal = data.budget.flights + data.budget.lodging + data.budget.activities;
                const contingency = subtotal * 0.1;
                const grandTotal = subtotal + contingency;

                document.getElementById('budget-flights').textContent = `$${data.budget.flights.toLocaleString()}`;
                document.getElementById('budget-lodging').textContent = `$${data.budget.lodging.toLocaleString()}`;
                document.getElementById('budget-activities').textContent = `$${data.budget.activities.toLocaleString()}`;
                document.getElementById('budget-subtotal').textContent = `$${subtotal.toLocaleString()}`;
                document.getElementById('budget-contingency').textContent = `$${contingency.toLocaleString(undefined, {maximumFractionDigits: 0})}`;
                document.getElementById('budget-grand-total').textContent = `$${grandTotal.toLocaleString(undefined, {maximumFractionDigits: 0})}`;

                budgetChart.data.datasets[0].data = [data.budget.flights, data.budget.lodging, data.budget.activities];
                budgetChart.update();
                
                document.getElementById('quickbook-flight-name').textContent = data.quickbook.flightName;
                document.getElementById('quickbook-flight-details').textContent = data.quickbook.flightDetails;
                document.getElementById('quickbook-lodging-name').textContent = data.quickbook.lodgingName;
                document.getElementById('quickbook-lodging-details').textContent = data.quickbook.lodgingDetails;
                document.getElementById('quickbook-transfer-name').textContent = data.quickbook.transferName;
                document.getElementById('quickbook-transfer-details').textContent = data.quickbook.transferDetails;

                document.getElementById('checklist').innerHTML = data.checklist;
            };

            const selectCity = (city) => {
                currentCity = city;
                document.getElementById('summary-city').textContent = city;
                citySelectorButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.city === city));
                updateTheme(city);
                updateChartHighlight(city);
                renderCityDetails(city);
                renderItinerary(city);
                updateBookingAndLogistics(city);
            };

            citySelectorButtons.forEach(button => {
                button.addEventListener('click', () => {
                    selectCity(button.dataset.city);
                });
            });

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    renderItineraryTab(button.dataset.tab);
                });
            });
            
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section');
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    if (pageYOffset >= section.offsetTop - 80) {
                        current = section.getAttribute('id');
                    }
                });
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active');
                    }
                });
            });

            selectCity('Rome');
        });
    </script>
</body>
</html>

